(this.webpackJsonpfoodtech=this.webpackJsonpfoodtech||[]).push([[4],{467:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(118),l=a(470),s=a(471),m=a(474),i=a(469),o=a(472),u=a(476),d=a(468);a(488);var E=Object(d.a)(({bem:e,time:t})=>c.a.createElement("div",{className:e()},c.a.createElement("div",{className:e("icon")}),c.a.createElement("div",{className:e("block")},c.a.createElement("div",null,c.a.createElement(i.a,{type:"subheader"},"\u0414\u043e\u0441\u0442\u0430\u0432\u0438\u043c \u0437\u0430")),c.a.createElement("div",null,c.a.createElement(i.a,{type:"subheaderDescription"},t)))),"DeliveryTime"),p=a(117);a(489);var b=Object(d.a)(({bem:e,height:t,children:a,itemsCount:n,maxItemsCount:r=3,activeItemIndex:l})=>{const s=c.a.useRef(null),m=c.a.useRef(null),[i,o]=c.a.useState({topOverlap:!1,bottomOverlap:n>r}),u=()=>{if(s.current){const e=s.current.scrollTop;o({topOverlap:e>=40,bottomOverlap:!(!m.current||!s.current)&&m.current.offsetHeight>=s.current.scrollTop+40+s.current.clientHeight})}};c.a.useEffect(()=>{if(m.current&&s.current&&-1!==l){const e=m.current.clientHeight/n;s.current.scrollTo({top:e*l,behavior:"smooth"}),u()}},[l]);const{topOverlap:d,bottomOverlap:E}=i,p={height:`calc(100vh * ${t||220} / 540)`};return c.a.createElement("div",{style:p,className:e.modify({topOverlap:d,bottomOverlap:E})},c.a.createElement("div",{style:p,onScroll:u,className:e("inner"),ref:s},c.a.createElement("div",{ref:m},a)))}),f=a(475);a(490);const v=({bem:e,quantity:t,focused:a})=>c.a.createElement("div",{className:e("quantitySlider")},a&&c.a.createElement("span",{className:e("qtyIconLess")}),c.a.createElement("div",{className:e.modify({focused:a},"qtyItems")},c.a.createElement("span",{className:e("qtyItem")},t)),a&&c.a.createElement("span",{className:e("qtyIconMore")})),N=Object(r.withFocusable)()(Object(d.a)(Object(p.a)(({bem:e,name:t,focused:a,price:n,id:r,index:l,cart:s,imagesUrls:m,clearName:o})=>{if(!s.itemsMap[r])return null;const u=s.itemsMap[r].length;return c.a.createElement("tr",{className:e()},c.a.createElement("td",{className:e("cell","index")},l),c.a.createElement("td",{className:e("cell","imgCell")},c.a.createElement(f.a,{index:!1},c.a.createElement("img",{src:m[0],alt:o,className:e("img")}))),c.a.createElement("td",{className:e("description","cell")},c.a.createElement("div",{className:e("row")},c.a.createElement(i.a,{type:"title"},t)),c.a.createElement("div",null,c.a.createElement(i.a,{type:"subheaderDescription"},n,"\u20bd"))),c.a.createElement("td",{className:e("quantity","cell")},c.a.createElement("div",{className:e("quantityIcons")},c.a.createElement(v,{focused:a,bem:e,quantity:u}))))}),"CartRow")),y=Object(r.withFocusable)()(({focused:e,bem:t,children:a})=>c.a.createElement("button",{type:"button",className:t.modify({focused:e},"button")},a));var g=Object(d.a)(Object(p.a)(({cart:e,bem:t,activeItemIndex:a})=>{const n=Object.keys(e.itemsMap).length,r=c.a.createElement("table",{className:t("table")},c.a.createElement("tbody",null,Object.entries(e.itemsMap).map(([e,t],a)=>{const n="CART_ITEM_"+e;return c.a.createElement(N,Object.assign({},t[0],{focusKey:n,index:a+1,key:e}))})));return c.a.createElement("div",{className:t()},c.a.createElement("div",{className:t("tableWrapper")},n>3?c.a.createElement(b,{height:280,activeItemIndex:a,itemsCount:n},r):r),c.a.createElement(y,{bem:t,focusKey:"PAY_BUTTON"},c.a.createElement(i.a,{type:"subheader"},"\u041a \u043e\u043f\u043b\u0430\u0442\u0435 ",e.totalPrice," \u20bd")))}),"CartTable"),h=a(43);function O(e,t,a){const[n,c]=e.map((e,t)=>[t,e]).find(e=>-1!==e[1].indexOf(a))||[0,e[0]],r=c.indexOf(a);if("up"===t){if(0===r){return e[n-1<0?e.length-1:n-1][0]}return e[n][r-1]}if(r===c.length-1){return e[n+1>e.length-1?0:n+1][0]}return e[n][r+1]}a(491);var T=a(492),_=a.n(T);const C=37,I=39,A=38,P=40;t.default=Object(r.withFocusable)()(Object(p.a)(({ui:e,cart:t,setFocus:a,pauseSpatialNavigation:n,resumeSpatialNavigation:r})=>{const[d,p]=c.a.useState("PAY_BUTTON"),b=c.a.useRef(null),f=e=>{p(e),a(e)},v=[["NAVIGATION_ADDRESS"],Object.keys(t.itemsMap).map(e=>"CART_ITEM_"+e),["PAY_BUTTON"]];c.a.useEffect(()=>{if(0===Object.entries(t.itemsMap).length)return e.gotoPage(h.b.MAP);setTimeout(()=>{b.current&&(b.current.style.opacity="0",setTimeout(()=>{b.current&&b.current.remove()},500))},2500),a(d);const c=a=>{if(a.preventDefault(),a.cancelBubble=!0,[A,P].includes(a.keyCode)){const e=a.keyCode===A?"up":"down",t=O(v,e,d);return f(t)}if([C,I].includes(a.keyCode)&&d.startsWith("CART_ITEM"))return(e=>{const a=d.replace("CART_ITEM_","");if(d.startsWith("CART_ITEM"))if(e===C){if(1===t.itemsMap[a].length){const e=O(v,"down",d);f(e)}t.removeFromCart(a)}else t.addToCart(a)})(a.keyCode);13===a.keyCode&&("NAVIGATION_ADDRESS"===d?e.gotoPage(h.b.MAP):"PAY_BUTTON"===d&&alert("PAY"))};return window.document.addEventListener("keydown",c),n(),()=>{window.document.removeEventListener("keydown",c),r()}});const N=c.a.createElement(c.a.Fragment,null,c.a.createElement(E,{time:"12 \u043c\u0438\u043d\u0443\u0442"}),c.a.createElement(u.a,{onEnterPress:()=>e.gotoPage(h.b.MAP),focusKey:"NAVIGATION_ADDRESS"}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,{title:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430",rightElement:N}),c.a.createElement(l.a,{className:"CartPage__container"},c.a.createElement(s.a,{className:"CartPage__row"},c.a.createElement(m.a,{s:2,m:3,l:4,xl:6},c.a.createElement(g,{activeItemIndex:v[1].indexOf(d)})),c.a.createElement(m.a,{s:2,m:3,l:4,xl:6,className:"CartPage__text"},c.a.createElement("div",{className:"CartPage__acent"},c.a.createElement("div",{className:"CartPage__overlay",ref:b}),c.a.createElement("div",{className:"CartPage__visible"},c.a.createElement("img",{src:_.a,className:"CartPage__icon",alt:"\u0418\u043a\u043e\u043d\u043a\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"}),c.a.createElement("p",null,c.a.createElement(i.a,{type:"subheaderDescription"},"\u041c\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u0432\u0430\u043c \u043d\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d")),c.a.createElement("p",null,c.a.createElement(i.a,{type:"header"},"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u043a\u0432\u0430\u0440\u0442\u0438\u0440\u0443 \u0438 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u044b"))))))))}))},488:function(e,t,a){},489:function(e,t,a){},490:function(e,t,a){},491:function(e,t,a){},492:function(e,t,a){e.exports=a.p+"static/media/device.29dc30b4.svg"}}]);
//# sourceMappingURL=4.cfb3f6cb.chunk.js.map